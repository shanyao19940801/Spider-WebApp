package com.yao.spider.zhihu.parsers;

import com.yao.spider.core.entity.Page;
import com.yao.spider.core.factory.ParserFactory;
import com.yao.spider.core.parser.IPageParser;
import com.yao.spider.zhihu.ZhiHuHttpClient;
import com.yao.spider.zhihu.config.ZhiHuConfig;
import org.apache.http.client.methods.HttpGet;
import org.junit.Test;

/**
 * Created by user on 2018/3/28.
 */
public class UserParserTest {
    @Test
    public void parser() throws Exception {
        String au = "c3cef7c66a1843f8b3a9e6a1e3160e20";
        String startToken = ZhiHuConfig.startUserToken;
        String startUrl = String.format(ZhiHuConfig.FOLLOWEES_API, startToken, 0);
//        String apiUrl = "https://www.zhihu.com/api/v4/members/harrison-81-73/followees?include=data%5B*%5D.answer_count%2Carticles_count%2Cgender%2Cfollower_count%2Cis_followed%2Cis_following%2Cbadge%5B%3F(type%3Dbest_answerer)%5D.topics&offset=0&limit=20";
        HttpGet request = new HttpGet(startUrl);
        request.setHeader("authorization","oauth " + au);
        Page page = ZhiHuHttpClient.getInstance().getPage(request);
        IPageParser pageParser = ParserFactory.getParserClass(ZhiHuUserParser.class);
        pageParser.parser(page.getHtml());
    }
    @Test
    public void parser01() {
        String s = "{\"paging\": {\"is_end\": false, \"totals\": 282, \"previous\": \"http://www.zhihu.com/api/v4/members/wo-yan-chen-mo/followees?include=data%5B%2A%5D.answer_count%2Carticles_count%2Cgender%2Cfollower_count%2Cis_followed%2Cis_following%2Cbadge%5B%3F%28type%3Dbest_answerer%29%5D.topics&limit=20&offset=0\", \"is_start\": true, \"next\": \"http://www.zhihu.com/api/v4/members/wo-yan-chen-mo/followees?include=data%5B%2A%5D.answer_count%2Carticles_count%2Cgender%2Cfollower_count%2Cis_followed%2Cis_following%2Cbadge%5B%3F%28type%3Dbest_answerer%29%5D.topics&limit=20&offset=20\"}, \"data\": [{\"is_followed\": false, \"avatar_url_template\": \"https://pic1.zhimg.com/v2-d22e281bbbce61e17fa87146a16ee1d1_{size}.jpg\", \"user_type\": \"people\", \"answer_count\": 99, \"badge\": [], \"is_following\": false, \"url\": \"http://www.zhihu.com/api/v4/people/8194c8a5da6f5760d6b48f32c5fd5764\", \"url_token\": \"liao-shi-qin-16\", \"id\": \"8194c8a5da6f5760d6b48f32c5fd5764\", \"articles_count\": 15, \"name\": \"\\u5ed6\\u8bd7\\u7434\", \"headline\": \"\\u7269\\u6d41\\u89c4\\u5212\\u7814\\u7a76/\\u6587\\u53f2\\u54f2\\u7231\\u597d\\u8005\", \"gender\": 0, \"is_advertiser\": false, \"avatar_url\": \"https://pic1.zhimg.com/v2-d22e281bbbce61e17fa87146a16ee1d1_is.jpg\", \"is_org\": false, \"follower_count\": 2942, \"type\": \"people\"}, {\"is_followed\": false, \"avatar_url_template\": \"https://pic3.zhimg.com/v2-6ef77f6df8a35e507b4e813a6c64bf4a_{size}.jpg\", \"user_type\": \"people\", \"answer_count\": 0, \"badge\": [], \"is_following\": false, \"url\": \"http://www.zhihu.com/api/v4/people/b89d89e1b60151aa70f9f414d13b2789\", \"url_token\": \"zoeyzhai\", \"id\": \"b89d89e1b60151aa70f9f414d13b2789\", \"articles_count\": 93, \"name\": \"ZoeyZhai\", \"headline\": \"TiDB \\u5b98\\u65b9\\u6367\\u54cf\", \"gender\": 0, \"is_advertiser\": false, \"avatar_url\": \"https://pic3.zhimg.com/v2-6ef77f6df8a35e507b4e813a6c64bf4a_is.jpg\", \"is_org\": false, \"follower_count\": 2192, \"type\": \"people\"}, {\"is_followed\": false, \"avatar_url_template\": \"https://pic4.zhimg.com/78281a776634150b0e80fb4b10e633c0_{size}.jpg\", \"user_type\": \"people\", \"answer_count\": 41, \"badge\": [], \"is_following\": false, \"url\": \"http://www.zhihu.com/api/v4/people/186e1f00f713b418c91b80da93d7109d\", \"url_token\": \"ling-yu-zhong-38\", \"id\": \"186e1f00f713b418c91b80da93d7109d\", \"articles_count\": 6, \"name\": \"\\u51cc\\u7fbd\\u4e2d\", \"headline\": \"\\u82e5\\u6709\\u7b14\\u58a8\\u80fd\\u6d88\\u78e8\\uff0c\\u6216\\u5199\\u6625\\u79cb\\u4f34\\u738b\\u69bb\\u3002\", \"gender\": 1, \"is_advertiser\": false, \"avatar_url\": \"https://pic4.zhimg.com/78281a776634150b0e80fb4b10e633c0_is.jpg\", \"is_org\": false, \"follower_count\": 10839, \"type\": \"people\"}, {\"is_followed\": false, \"avatar_url_template\": \"https://pic3.zhimg.com/v2-e536619a348fc647a7b51fcd5cd21d34_{size}.jpg\", \"user_type\": \"people\", \"answer_count\": 0, \"badge\": [], \"is_following\": false, \"url\": \"http://www.zhihu.com/api/v4/people/5c50438e23755530fe3d6dac38506989\", \"url_token\": \"qu-kuai-lu-dong-blockbeats\", \"id\": \"5c50438e23755530fe3d6dac38506989\", \"articles_count\": 28, \"name\": \"\\u533a\\u5757\\u5f8b\\u52a8BlockBeats\", \"headline\": \"\\u4e13\\u6ce8\\u4e8e\\u533a\\u5757\\u94fe\\u9886\\u57df\\u79d1\\u6280\\u521b\\u4e1a\\u5206\\u6790\\uff0c\\u63d0\\u4f9b\\u6700\\u65b0\\u9c9c\\uff0c\\u6700\\u5177\\u6df1\\u5ea6\\uff0c\\u6700\\u6709\\u4ef7\\u503c\\u7684\\u533a\\u5757\\u94fe\\u4e1a\\u65b0\\u95fb\\u3002\", \"gender\": -1, \"is_advertiser\": false, \"avatar_url\": \"https://pic3.zhimg.com/v2-e536619a348fc647a7b51fcd5cd21d34_is.jpg\", \"is_org\": false, \"follower_count\": 9363, \"type\": \"people\"}, {\"is_followed\": false, \"avatar_url_template\": \"https://pic1.zhimg.com/v2-88ec4130b2d868ef04781974370bcbbd_{size}.jpg\", \"user_type\": \"organization\", \"answer_count\": 25, \"badge\": [{\"type\": \"identity\", \"description\": \"\\u5df2\\u8ba4\\u8bc1\\u7684\\u5b98\\u65b9\\u5e10\\u53f7\"}], \"is_following\": false, \"url\": \"http://www.zhihu.com/api/v4/people/24e0581cc8932d034664dc6f30628f67\", \"url_token\": \"huo-rong-an-quan-shi-yan-shi\", \"id\": \"24e0581cc8932d034664dc6f30628f67\", \"articles_count\": 86, \"name\": \"\\u706b\\u7ed2\\u5b89\\u5168\\u5b9e\\u9a8c\\u5ba4\", \"headline\": \"\\u4e00\\u4e2a\\u7eaf\\u7cb9\\u7684\\u4fe1\\u606f\\u5b89\\u5168\\u516c\\u53f8\", \"gender\": -1, \"is_advertiser\": false, \"avatar_url\": \"https://pic1.zhimg.com/v2-88ec4130b2d868ef04781974370bcbbd_is.jpg\", \"is_org\": true, \"follower_count\": 18353, \"type\": \"people\"}, {\"is_followed\": false, \"avatar_url_template\": \"https://pic4.zhimg.com/v2-c6d5dec1d269a33944d6fd31660e928b_{size}.jpg\", \"user_type\": \"people\", \"answer_count\": 158, \"badge\": [], \"is_following\": false, \"url\": \"http://www.zhihu.com/api/v4/people/c11336b8607d86bc9090bed90757a34c\", \"url_token\": \"lifesinger\", \"id\": \"c11336b8607d86bc9090bed90757a34c\", \"articles_count\": 1, \"name\": \"\\u7389\\u4f2f\", \"headline\": \"\\u56e0\\u4e0a\\u52aa\\u529b\\uff0c\\u679c\\u4e0a\\u968f\\u7f18\\u3002\", \"gender\": -1, \"is_advertiser\": false, \"avatar_url\": \"https://pic4.zhimg.com/v2-c6d5dec1d269a33944d6fd31660e928b_is.jpg\", \"is_org\": false, \"follower_count\": 33600, \"type\": \"people\"}, {\"is_followed\": false, \"avatar_url_template\": \"https://pic1.zhimg.com/v2-8f28491c63c35acea45dbc3f6e67e93f_{size}.jpg\", \"user_type\": \"people\", \"answer_count\": 293, \"badge\": [], \"is_following\": false, \"url\": \"http://www.zhihu.com/api/v4/people/9acd1c5913271c4c378abfd559190e04\", \"url_token\": \"wangbeinan\", \"id\": \"9acd1c5913271c4c378abfd559190e04\", \"articles_count\": 3, \"name\": \"\\u5317\\u5357\", \"headline\": \"Twitter\\u6838\\u5fc3\\u670d\\u52a1\\u7ec4\\u540e\\u7aef\\u7a0b\\u5e8f\\u5458\", \"gender\": 1, \"is_advertiser\": false, \"avatar_url\": \"https://pic1.zhimg.com/v2-8f28491c63c35acea45dbc3f6e67e93f_is.jpg\", \"is_org\": false, \"follower_count\": 7470, \"type\": \"people\"}, {\"is_followed\": false, \"avatar_url_template\": \"https://pic3.zhimg.com/v2-0293286ca688105cd98368e803b5f60f_{size}.jpg\", \"user_type\": \"people\", \"answer_count\": 0, \"badge\": [], \"is_following\": false, \"url\": \"http://www.zhihu.com/api/v4/people/348fb4435d905443a17c085f59f3083f\", \"url_token\": \"davidripple\", \"id\": \"348fb4435d905443a17c085f59f3083f\", \"articles_count\": 0, \"name\": \"\\u6731\\u5efa\\u5e73\", \"headline\": \"\\u817e\\u8baf\\u4e91\\u6280\\u672f\\u603b\\u76d1\\uff0c\\u817e\\u8bafTEG\\u67b6\\u6784\\u5e73\\u53f0\\u90e8\\u4e13\\u5bb6\\u5de5\\u7a0b\\u5e08\", \"gender\": 1, \"is_advertiser\": false, \"avatar_url\": \"https://pic3.zhimg.com/v2-0293286ca688105cd98368e803b5f60f_is.jpg\", \"is_org\": false, \"follower_count\": 1131, \"type\": \"people\"}, {\"is_followed\": false, \"avatar_url_template\": \"https://pic1.zhimg.com/d10e07fc78c96d54575fb6c2caf1cfa6_{size}.jpg\", \"user_type\": \"people\", \"answer_count\": 12, \"badge\": [], \"is_following\": false, \"url\": \"http://www.zhihu.com/api/v4/people/487b40b35b91b4c8b2f85dd6e3f18d1c\", \"url_token\": \"dan-qing-feng\", \"id\": \"487b40b35b91b4c8b2f85dd6e3f18d1c\", \"articles_count\": 0, \"name\": \"\\u5355\\u9752\\u5cf0\", \"headline\": \"Asch(\\u963f\\u5e0c\\u94fe)\\u521b\\u59cb\\u4eba, \\u7a0b\\u5e8f\\u5458\", \"gender\": 1, \"is_advertiser\": false, \"avatar_url\": \"https://pic1.zhimg.com/d10e07fc78c96d54575fb6c2caf1cfa6_is.jpg\", \"is_org\": false, \"follower_count\": 446, \"type\": \"people\"}, {\"is_followed\": false, \"avatar_url_template\": \"https://pic4.zhimg.com/da8e974dc_{size}.jpg\", \"user_type\": \"people\", \"answer_count\": 238, \"badge\": [], \"is_following\": false, \"url\": \"http://www.zhihu.com/api/v4/people/ac0997f247372aba86ff40a7e9dd895d\", \"url_token\": \"maxdeath\", \"id\": \"ac0997f247372aba86ff40a7e9dd895d\", \"articles_count\": 9, \"name\": \"maxdeath\", \"headline\": \"\\u4fe1\\u606f\\u8bba\\u535a\\u58eb\\uff0c\\u533a\\u5757\\u94fe\\u535a\\u58eb\\u540e\", \"gender\": 1, \"is_advertiser\": false, \"avatar_url\": \"https://pic4.zhimg.com/da8e974dc_is.jpg\", \"is_org\": false, \"follower_count\": 13417, \"type\": \"people\"}, {\"is_followed\": false, \"avatar_url_template\": \"https://pic2.zhimg.com/v2-dd46a8c761ce74aad89ae49bceaf116f_{size}.jpg\", \"user_type\": \"people\", \"answer_count\": 3, \"badge\": [], \"is_following\": false, \"url\": \"http://www.zhihu.com/api/v4/people/884d643078ef02965d5eaa1fcf074abc\", \"url_token\": \"jiangyongtnix\", \"id\": \"884d643078ef02965d5eaa1fcf074abc\", \"articles_count\": 1, \"name\": \"\\u848b\\u52c7\", \"headline\": \"\\u533a\\u5757\\u94fe\\u67b6\\u6784\\u5e08\", \"gender\": 1, \"is_advertiser\": false, \"avatar_url\": \"https://pic2.zhimg.com/v2-dd46a8c761ce74aad89ae49bceaf116f_is.jpg\", \"is_org\": false, \"follower_count\": 773, \"type\": \"people\"}, {\"is_followed\": false, \"avatar_url_template\": \"https://pic1.zhimg.com/dec9dec77a8d5386e2a589622725ac8a_{size}.jpg\", \"user_type\": \"people\", \"answer_count\": 192, \"badge\": [], \"is_following\": false, \"url\": \"http://www.zhihu.com/api/v4/people/f03a74410ff31839adba9c10b06ef3d0\", \"url_token\": \"liu-yi-jie-84\", \"id\": \"f03a74410ff31839adba9c10b06ef3d0\", \"articles_count\": 20, \"name\": \"\\u5218\\u6613\\u6770\", \"headline\": \"\\u6211\\u53eb\\u9ad8\\u7ea7\\u9ed1\", \"gender\": 1, \"is_advertiser\": false, \"avatar_url\": \"https://pic1.zhimg.com/dec9dec77a8d5386e2a589622725ac8a_is.jpg\", \"is_org\": false, \"follower_count\": 81930, \"type\": \"people\"}, {\"is_followed\": false, \"avatar_url_template\": \"https://pic4.zhimg.com/79bff125d66dcdfa0bdf165f2ac77e6a_{size}.jpg\", \"user_type\": \"people\", \"answer_count\": 13, \"badge\": [], \"is_following\": false, \"url\": \"http://www.zhihu.com/api/v4/people/438fbeab7574e55da0a2652b2e4f43c6\", \"url_token\": \"MatrixKing\", \"id\": \"438fbeab7574e55da0a2652b2e4f43c6\", \"articles_count\": 0, \"name\": \"King Matrix\", \"headline\": \"\", \"gender\": 1, \"is_advertiser\": false, \"avatar_url\": \"https://pic4.zhimg.com/79bff125d66dcdfa0bdf165f2ac77e6a_is.jpg\", \"is_org\": false, \"follower_count\": 17536, \"type\": \"people\"}, {\"is_followed\": false, \"avatar_url_template\": \"https://pic3.zhimg.com/v2-a3ce43cd98773ff5eedeba090a821536_{size}.jpg\", \"user_type\": \"people\", \"answer_count\": 64, \"badge\": [], \"is_following\": false, \"url\": \"http://www.zhihu.com/api/v4/people/c1918cfa1c24048d10550678621d873b\", \"url_token\": \"jiang-zhuo-er\", \"id\": \"c1918cfa1c24048d10550678621d873b\", \"articles_count\": 0, \"name\": \"\\u6c5f\\u5353\\u5c14\", \"headline\": \"\", \"gender\": 1, \"is_advertiser\": false, \"avatar_url\": \"https://pic3.zhimg.com/v2-a3ce43cd98773ff5eedeba090a821536_is.jpg\", \"is_org\": false, \"follower_count\": 24560, \"type\": \"people\"}, {\"is_followed\": false, \"avatar_url_template\": \"https://pic1.zhimg.com/7708fd6bc955b6f014edf109976eb0be_{size}.jpg\", \"user_type\": \"people\", \"answer_count\": 26, \"badge\": [], \"is_following\": false, \"url\": \"http://www.zhihu.com/api/v4/people/d0f00f9fd1e29798633ea4db16551bed\", \"url_token\": \"guo-de-long-5\", \"id\": \"d0f00f9fd1e29798633ea4db16551bed\", \"articles_count\": 18, \"name\": \"\\u90ed\\u5fb7\\u9f99\", \"headline\": \"\\u6570\\u5b57\\u8d27\\u5e01\\u4ece\\u4e1a\\u8005\\uff0c\\u5bf9\\u6bd4\\u7279\\u5e01, \\u4ee5\\u592a\\u574a, \\u533a\\u5757\\u94fe\\u76f8\\u5173\\u8bdd\\u9898\\u611f\\u5174\\u8da3\", \"gender\": 1, \"is_advertiser\": false, \"avatar_url\": \"https://pic1.zhimg.com/7708fd6bc955b6f014edf109976eb0be_is.jpg\", \"is_org\": false, \"follower_count\": 2682, \"type\": \"people\"}, {\"is_followed\": false, \"avatar_url_template\": \"https://pic1.zhimg.com/v2-6c622ccaeccfb4629a6edfe0c3c98a78_{size}.jpg\", \"user_type\": \"people\", \"answer_count\": 3, \"badge\": [], \"is_following\": false, \"url\": \"http://www.zhihu.com/api/v4/people/5d611553549920464f37b0b8acb4208b\", \"url_token\": \"haihua-zhu-73\", \"id\": \"5d611553549920464f37b0b8acb4208b\", \"articles_count\": 12, \"name\": \"Haihua Zhu\", \"headline\": \"\\u519c\\u6c11\\uff0c\\u79cd\\u97ed\\u83dc\\u7684\\u90a3\\u79cd\\u3002\\u5fae\\u4fe1\\uff1abishuo008\", \"gender\": -1, \"is_advertiser\": false, \"avatar_url\": \"https://pic1.zhimg.com/v2-6c622ccaeccfb4629a6edfe0c3c98a78_is.jpg\", \"is_org\": false, \"follower_count\": 1401, \"type\": \"people\"}, {\"is_followed\": false, \"avatar_url_template\": \"https://pic3.zhimg.com/v2-98841c48becc21f1a8024b2ae19972f0_{size}.jpg\", \"user_type\": \"people\", \"answer_count\": 410, \"badge\": [], \"is_following\": false, \"url\": \"http://www.zhihu.com/api/v4/people/ec24f949cee93f24eb9585a9229e1067\", \"url_token\": \"Andreas-Vladimir\", \"id\": \"ec24f949cee93f24eb9585a9229e1067\", \"articles_count\": 5, \"name\": \"\\u96f7\\u9690\\u9690\", \"headline\": \"\\u5403\\u8c01\\u5411\\u8c01\\uff0c\\u6068\\u8c01\\u5077\\u8c01\", \"gender\": 1, \"is_advertiser\": false, \"avatar_url\": \"https://pic3.zhimg.com/v2-98841c48becc21f1a8024b2ae19972f0_is.jpg\", \"is_org\": false, \"follower_count\": 16221, \"type\": \"people\"}, {\"is_followed\": false, \"avatar_url_template\": \"https://pic1.zhimg.com/f73d8176afa70e45b99415af098245db_{size}.jpg\", \"user_type\": \"people\", \"answer_count\": 34, \"badge\": [], \"is_following\": false, \"url\": \"http://www.zhihu.com/api/v4/people/c6884bbeba340a71230a20418ffe826b\", \"url_token\": \"tangqiao\", \"id\": \"c6884bbeba340a71230a20418ffe826b\", \"articles_count\": 0, \"name\": \"tangqiaoboy\", \"headline\": \"\\u5c0f\\u733f\\u641c\\u9898\\u4ea7\\u54c1\\u6280\\u672f\\u8d1f\\u8d23\\u4eba\", \"gender\": 1, \"is_advertiser\": false, \"avatar_url\": \"https://pic1.zhimg.com/f73d8176afa70e45b99415af098245db_is.jpg\", \"is_org\": false, \"follower_count\": 6857, \"type\": \"people\"}, {\"is_followed\": false, \"avatar_url_template\": \"https://pic4.zhimg.com/v2-87f0240459329e9626f7cb510844b35a_{size}.jpg\", \"user_type\": \"people\", \"answer_count\": 2, \"badge\": [], \"is_following\": false, \"url\": \"http://www.zhihu.com/api/v4/people/7c57b676a5fbaa95a2cebaeab35319f0\", \"url_token\": \"xiao-hui-68-47\", \"id\": \"7c57b676a5fbaa95a2cebaeab35319f0\", \"articles_count\": 13, \"name\": \"\\u5c0f\\u7070\", \"headline\": \"\\u8111\\u6d1e\\u7565\\u5927\\u7684\\u7a0b\\u5e8f\\u5458\\u4e00\\u679a\\uff0c\\u516c\\u4f17\\u53f7 \\u7a0b\\u5e8f\\u5458\\u5c0f\\u7070\\uff08chengxuyuanxiaohui\\uff09\", \"gender\": 1, \"is_advertiser\": false, \"avatar_url\": \"https://pic4.zhimg.com/v2-87f0240459329e9626f7cb510844b35a_is.jpg\", \"is_org\": false, \"follower_count\": 3214, \"type\": \"people\"}, {\"is_followed\": false, \"avatar_url_template\": \"https://pic3.zhimg.com/v2-45aa0379f6efc9711940374119060a85_{size}.jpg\", \"user_type\": \"people\", \"answer_count\": 18, \"badge\": [], \"is_following\": false, \"url\": \"http://www.zhihu.com/api/v4/people/f059ea07faf1e7ed13c0afcbe5d6a7c1\", \"url_token\": \"xin-shang-xie\", \"id\": \"f059ea07faf1e7ed13c0afcbe5d6a7c1\", \"articles_count\": 35, \"name\": \"\\u8f9b\\u4e0a\\u90aa\", \"headline\": \"\\u516c\\u4f17\\u53f7\\u8f9b\\u4e0a\\u90aa\\uff08xinshangye006\\uff09\\u3002\\u5510\\u4ee3\\u6587\\u5b66\\u3001\\u4e2d\\u52a0\\u6559\\u80b2\\u3001\\u4e2d\\u897f\\u65b9\\u6587\\u5316\\u6bd4\\u8f83\\u3002\", \"gender\": 0, \"is_advertiser\": false, \"avatar_url\": \"https://pic3.zhimg.com/v2-45aa0379f6efc9711940374119060a85_is.jpg\", \"is_org\": false, \"follower_count\": 2720, \"type\": \"people\"}]}";
        IPageParser pageParser = ParserFactory.getParserClass(ZhiHuUserParser.class);
        pageParser.parser(s);
    }
}